<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DXCore4 Analytics</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="dashboard.css">
    <!-- Chart.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- SheetJS for Excel export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
</head>
<body>

    <div class="container">
        <header>
            <div class="header-main">
                <div class="header-left">
                    <div class="logo">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="40" height="40" rx="8" fill="#2c7be5"/>
                            <path d="M12 20L18 26L28 14" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="header-text">
                        <h1>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∫–æ–º–∞–Ω–¥</h1>
                        <div class="date-range-info" id="dateRangeInfo">
                            <span class="date-range-icon">üìÖ</span>
                            <span id="dateRangeText">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="handleFileUpload(event)">
                    <button class="btn-upload" onclick="document.getElementById('fileInput').click()" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π —Ñ–∞–π–ª issues_flat.json">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                    </button>
                </div>
            </div>
        </header>

        <!-- Table of Contents (TOC) - Side Navigation -->
        <nav id="tocNav" class="toc-nav">
            <div class="toc-header">
                <h3>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
                <button class="toc-toggle" onclick="toggleTOC()" title="–°–≤–µ—Ä–Ω—É—Ç—å/–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å">‚ñ∂</button>
            </div>
            
            <!-- Quick Actions -->
            <div class="toc-actions">
                <button class="toc-action-btn" onclick="document.getElementById('openDateFilterBtn').click()" title="–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞">
                    üìÖ –ü–µ—Ä–∏–æ–¥
                </button>
                <button class="toc-action-btn" onclick="document.getElementById('openFiltersBtn').click()" title="–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã">
                    ‚öôÔ∏è –§–∏–ª—å—Ç—Ä—ã
                </button>
            </div>
            
            <ul class="toc-list" id="tocList">
                <!-- Will be populated by JS -->
            </ul>
        </nav>

        <!-- Main Navigation Tabs -->
        <div class="main-tabs">
            <button class="main-tab-btn active" data-tab="metrics" onclick="switchMainTab('metrics')">
                üìä –ú–µ—Ç—Ä–∏–∫–∏
            </button>
            <button class="main-tab-btn" data-tab="trends" onclick="switchMainTab('trends')">
                üìà –¢—Ä–µ–Ω–¥—ã
            </button>
            <button class="main-tab-btn" data-tab="math" onclick="switchMainTab('math')">
                üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
            </button>
        </div>

        <!-- METRICS TAB -->
        <div id="metricsTab" class="tab-content active">
            <!-- Controls / Filters for Metrics -->
            <div class="controls">
                <!-- View Mode Switcher -->
                <div class="control-group radio-group" id="viewModeGroup">
                <label>–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:</label>
                <div class="radio-options">
                    <!-- Main 3 modes - always visible -->
                    <label class="radio-label">
                        <input type="radio" name="viewMode" value="project" checked>
                        –ü–æ –ü—Ä–æ–µ–∫—Ç–∞–º
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="viewMode" value="assignee">
                        –ü–æ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="viewMode" value="board">
                        –ü–æ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º
                    </label>
                    
                    <!-- Additional modes - hidden by default -->
                    <div id="additionalModes" class="additional-modes" style="display: none;">
                        <label class="radio-label">
                            <input type="radio" name="viewMode" value="month">
                            –ü–æ –ú–µ—Å—è—Ü–∞–º
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="viewMode" value="sprint">
                            –ü–æ –°–ø—Ä–∏–Ω—Ç–∞–º
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="viewMode" value="epic">
                            –ü–æ –≠–ø–∏–∫–∞–º
                        </label>
                    </div>
                    
                    <!-- Toggle button -->
                    <button class="btn-more" id="toggleMoreModes" onclick="toggleAdditionalModes()">
                        <span id="moreModesBtnText">–ï—â–µ ‚ñº</span>
                    </button>
                </div>
            </div>

            <div class="separator"></div>

            <button id="openDateFilterBtn" class="btn-filters">üìÖ –ü–µ—Ä–∏–æ–¥</button>
            <button id="openFiltersBtn" class="btn-filters">‚öôÔ∏è –§–∏–ª—å—Ç—Ä—ã</button>
            <button id="resetFilters" class="btn-reset">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
        
        <!-- Selected Filters Info (Tag Cloud) -->
            <div class="filters-info-block">
                <div class="filter-tags-container" id="filterTagsContainer">
                    <!-- Tags populated by JS -->
                </div>
            </div>
            <!-- KPI Cards -->
            <div class="summary-cards" id="kpi-section">
            <div class="card clickable-card card-performance" onclick="openKPIDetails('performance')" title="–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—ã">
                <div class="card-icon">‚ö°</div>
                <h3>–°—Ä. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h3>
                <div class="value" id="avgPerf">-</div>
                <div class="sub-text">–û—Ü–µ–Ω–∫–∞/–ó–∞—Ç—Ä–∞—á–µ–Ω–æ –≤ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∑–∞–¥–∞—á–∞—Ö</div>
            </div>
            <div class="card clickable-card card-cycle" onclick="openKPIDetails('cycle')" title="–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á">
                <div class="card-icon">‚è±Ô∏è</div>
                <h3>–°—Ä. –í—Ä–µ–º—è –≤—ã–ø.</h3>
                <div class="value" id="avgCycle">-</div>
                <div class="cycle-details">
                    <span class="cycle-label">–í—Å–µ –∑–∞–¥–∞—á–∏:</span> <span id="avgCycleAll">-</span>
                    <br>
                    <span class="cycle-label">–ë–µ–∑ –±–∞–≥–æ–≤:</span> <span id="avgCycleNoBugs">-</span>
                </div>
                <div class="sub-text">–æ—Ç Todo –¥–æ Done</div>
            </div>
            <div class="card clickable-card card-debug" onclick="openKPIDetails('debug')" title="–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ª–∞–¥–∫–∏">
                <div class="card-icon">üêõ</div>
                <h3>–°—Ä. –û—Ç–ª–∞–¥–∫–∞</h3>
                <div class="value" id="avgDebug">-</div>
                <div class="sub-text">–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –±–∞–≥–∏ / –û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã</div>
            </div>
            <div class="card clickable-card card-comm" onclick="openKPIDetails('comm')" title="–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º">
                <div class="card-icon">üí¨</div>
                <h3>–°—Ä. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏</h3>
                <div class="value" id="avgComm">-</div>
                <div class="sub-text">–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Å–µ—Ä–≤–∏—Å-—Ç–∞—Å–∫–∏ / –û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã</div>
            </div>
            <div class="card clickable-card card-cr" onclick="openKPIDetails('cr')" title="–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö Change Requests">
                <div class="card-icon">üîÑ</div>
                <h3>–í—Å–µ–≥–æ Change Requests</h3>
                <div class="value" id="totalCR">-</div>
                <div class="sub-text">–ó–∞–¥–∞—á–∏ —Å –º–µ—Ç–∫–æ–π CR</div>
            </div>
        </div>

        <!-- Detailed Table -->
        <div class="table-container">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 id="tableTitle">–î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –ü—Ä–æ–µ–∫—Ç–∞–º</h3>
                <div style="display: flex; gap: 15px; align-items: center;">
                    <input 
                        type="text" 
                        id="metricsTableSearch" 
                        placeholder="üîç –ü–æ–∏—Å–∫..." 
                        style="display: none; padding: 8px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; width: 250px; transition: all 0.3s;"
                        oninput="handleMetricsSearch()"
                    >
                    <button class="btn-export" onclick="exportMetricsToExcel()">
                        üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
                    </button>
                    <small style="color: #666; font-style: italic;">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–¥–∞—á</small>
                </div>
            </div>
            <table>
                <thead>
                    <tr>
                        <th id="col-name" class="sortable" onclick="handleSort('sortName')">
                            –ü—Ä–æ–µ–∫—Ç <span id="icon-sortName" class="sort-icon"></span>
                        </th>
                        <th class="sortable" onclick="handleSort('sortCycle')" title="–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∑–∞–¥–∞—á–∏ –∏–∑ Todo –≤ Done">
                            –°—Ä. –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è <span id="icon-sortCycle" class="sort-icon"></span>
                        </th>
                        <th class="sortable" onclick="handleSort('sortPerf')" title="–û—Ü–µ–Ω–∫–∞ / –ó–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è">
                            –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å <span id="icon-sortPerf" class="sort-icon"></span>
                        </th>
                        <th class="sortable" onclick="handleSort('sortDebug')" title="–í—Ä–µ–º—è –Ω–∞ –ë–∞–≥–∏ / –í—Ä–µ–º—è –Ω–∞ –¢–∞—Å–∫–∏">
                            –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏ <span id="icon-sortDebug" class="sort-icon"></span>
                        </th>
                        <th class="sortable" onclick="handleSort('sortComm')" title="–í—Ä–µ–º—è –Ω–∞ Service Task / –û–±—â–µ–µ –≤—Ä–µ–º—è">
                            –ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π <span id="icon-sortComm" class="sort-icon"></span>
                        </th>
                        <th class="sortable" onclick="handleSort('sortCR')" title="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Å –º–µ—Ç–∫–æ–π CR">
                            –ö–æ–ª-–≤–æ CR <span id="icon-sortCR" class="sort-icon"></span>
                        </th>
                    </tr>
                </thead>
                <tbody id="metricsTableBody">
                    <!-- Rows populated by JS -->
                </tbody>
            </table>

            <!-- Charts -->
            <div class="charts-grid" style="margin-top: 30px;">
                <div class="chart-container">
                    <h3>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (%) <small style="color: #999; font-size: 11px; font-weight: normal;">‚ñ∏ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç–æ–ª–±–∏–∫ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π</small></h3>
                    <canvas id="perfChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>–°—Ä. –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–î–Ω–∏) <small style="color: #999; font-size: 11px; font-weight: normal;">‚ñ∏ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç–æ–ª–±–∏–∫ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π</small></h3>
                    <canvas id="cycleChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (–ß–∞—Å—ã) <small style="color: #999; font-size: 11px; font-weight: normal;">‚ñ∏ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç–æ–ª–±–∏–∫ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π</small></h3>
                    <canvas id="distChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Task Size Analysis -->
        <div class="size-analysis-section" style="margin-top: 50px;">
            <h3 style="margin-bottom: 20px;">üìä –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–æ–≤ –∑–∞–¥–∞—á</h3>
            <div class="size-analysis-grid">
                <div class="size-card">
                    <div class="size-card-header">
                        <span class="size-icon">üü¢</span>
                        <h4>–ú–∞–ª–µ–Ω—å–∫–∏–µ –∑–∞–¥–∞—á–∏</h4>
                        <span class="size-range">< 4 —á–∞—Å–∞</span>
                    </div>
                    <div class="size-card-body">
                        <div class="size-stat">
                            <span class="size-stat-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</span>
                            <span class="size-stat-value" id="smallTasksCount">-</span>
                        </div>
                        <div class="size-stat">
                            <span class="size-stat-label">–°—Ä. –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span>
                            <span class="size-stat-value" id="smallTasksPerf">-</span>
                        </div>
                        <div class="size-stat">
                            <span class="size-stat-label">–°—Ä. –≤—Ä–µ–º—è —Ü–∏–∫–ª–∞:</span>
                            <span class="size-stat-value" id="smallTasksCycle">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="size-card">
                    <div class="size-card-header">
                        <span class="size-icon">üü°</span>
                        <h4>–°—Ä–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏</h4>
                        <span class="size-range">4-16 —á–∞—Å–æ–≤</span>
                    </div>
                    <div class="size-card-body">
                        <div class="size-stat">
                            <span class="size-stat-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</span>
                            <span class="size-stat-value" id="mediumTasksCount">-</span>
                        </div>
                        <div class="size-stat">
                            <span class="size-stat-label">–°—Ä. –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span>
                            <span class="size-stat-value" id="mediumTasksPerf">-</span>
                        </div>
                        <div class="size-stat">
                            <span class="size-stat-label">–°—Ä. –≤—Ä–µ–º—è —Ü–∏–∫–ª–∞:</span>
                            <span class="size-stat-value" id="mediumTasksCycle">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="size-card">
                    <div class="size-card-header">
                        <span class="size-icon">üî¥</span>
                        <h4>–ë–æ–ª—å—à–∏–µ –∑–∞–¥–∞—á–∏</h4>
                        <span class="size-range">> 16 —á–∞—Å–æ–≤</span>
                    </div>
                    <div class="size-card-body">
                        <div class="size-stat">
                            <span class="size-stat-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</span>
                            <span class="size-stat-value" id="largeTasksCount">-</span>
                        </div>
                        <div class="size-stat">
                            <span class="size-stat-label">–°—Ä. –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span>
                            <span class="size-stat-value" id="largeTasksPerf">-</span>
                        </div>
                        <div class="size-stat">
                            <span class="size-stat-label">–°—Ä. –≤—Ä–µ–º—è —Ü–∏–∫–ª–∞:</span>
                            <span class="size-stat-value" id="largeTasksCycle">-</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="charts-grid" style="margin-top: 20px;">
                <div class="chart-container">
                    <h4>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º</h4>
                    <canvas id="sizeDistributionChart"></canvas>
                </div>
                <div class="chart-container">
                    <h4>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º</h4>
                    <canvas id="sizePerformanceChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Alerts Panel - Moved to the end -->
        <div id="alertsPanel" class="alerts-panel" style="display: none; margin-top: 30px;">
            <div class="alerts-header">
                <h3>‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–æ–Ω—ã</h3>
                <button class="btn-close-alerts" onclick="closeAlerts()">‚úï</button>
            </div>
            <div id="alertsList" class="alerts-list">
                <!-- Alerts populated by JS -->
            </div>
        </div>

        </div>
        <!-- End of Metrics Content -->

        </div>
        <!-- End of METRICS TAB -->

        <!-- TRENDS TAB -->
        <div id="trendsTab" class="tab-content">
            <!-- Empty controls block for consistent spacing -->
            <div class="controls" style="min-height: 0; padding: 0; margin: 0; border: none; box-shadow: none; background: transparent;">
            </div>
            
            <!-- Selected Filters Info for Trends (tags only, no buttons) -->
            <div class="filters-info-block">
                <div class="filter-tags-container" id="filterTagsContainerTrends">
                    <!-- Tags populated by JS -->
                </div>
            </div>

            <!-- Trends Content -->
            <div id="trendsSection" class="main-section">
                <h2 style="margin-bottom: 10px;">üìà –¢—Ä–µ–Ω–¥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</h2>
                <p id="trendComparisonInfo" style="color: #666; font-size: 14px; margin-bottom: 30px; font-style: italic;">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä–∏–æ–¥–∞—Ö...
                </p>
                
                <!-- Trend Summary Cards -->
                <div class="summary-cards">
                    <div class="card">
                        <div class="card-icon">‚ö°</div>
                        <h3>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h3>
                        <div class="value" id="trendPerf">-</div>
                        <div class="trend-indicator" id="trendPerfChange">-</div>
                    </div>
                    <div class="card">
                        <div class="card-icon">‚è±Ô∏è</div>
                        <h3>–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h3>
                        <div class="value" id="trendCycle">-</div>
                        <div class="trend-indicator" id="trendCycleChange">-</div>
                    </div>
                    <div class="card">
                        <div class="card-icon">üêõ</div>
                        <h3>–û—Ç–ª–∞–¥–∫–∞</h3>
                        <div class="value" id="trendDebug">-</div>
                        <div class="trend-indicator" id="trendDebugChange">-</div>
                    </div>
                    <div class="card">
                        <div class="card-icon">üí¨</div>
                        <h3>–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏</h3>
                        <div class="value" id="trendComm">-</div>
                        <div class="trend-indicator" id="trendCommChange">-</div>
                    </div>
                    <div class="card">
                        <div class="card-icon">üîÑ</div>
                        <h3>Change Requests</h3>
                        <div class="value" id="trendCR">-</div>
                        <div class="trend-indicator" id="trendCRChange">-</div>
                    </div>
                </div>

                <!-- Trend Charts Container (can be replaced by grouped trends) -->
                <div id="trendsChartsContainer">
                    <div class="charts-grid">
                        <div class="chart-container">
                            <h3>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤</h3>
                            <canvas id="trendPerfChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤</h3>
                            <canvas id="trendCycleChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3>Change Requests –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤</h3>
                            <canvas id="trendCRChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of TRENDS TAB -->

        <!-- MATH TAB -->
        <div id="mathTab" class="tab-content">
            <div class="math-content">
                <h2>üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞—Å—á–µ—Ç–æ–≤</h2>
                <p class="math-intro">–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ —Ñ–æ—Ä–º—É–ª—ã –∏ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ –¥–∞—à–±–æ—Ä–¥–µ.</p>

                <!-- 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å -->
                <div class="math-section">
                    <h3>1. üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (Performance)</h3>
                    <div class="formula-box">
                        <div class="formula">
                            <strong>–§–æ—Ä–º—É–ª–∞:</strong><br>
                            –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å = (Œ£ Original Estimate / Œ£ Time Spent) √ó 100%
                        </div>
                    </div>
                    <div class="math-description">
                        <p><strong>–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:</strong> –û—Ç–Ω–æ—à–µ–Ω–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∫ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–º—É. –ó–Ω–∞—á–µ–Ω–∏–µ > 100% –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –ø–ª–∞–Ω–∞.</p>
                        <p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
                        <ul>
                            <li>–ó–∞–¥–∞—á–∞ 1: –û—Ü–µ–Ω–∫–∞ = 8 —á–∞—Å–æ–≤, –ó–∞—Ç—Ä–∞—á–µ–Ω–æ = 6 —á–∞—Å–æ–≤</li>
                            <li>–ó–∞–¥–∞—á–∞ 2: –û—Ü–µ–Ω–∫–∞ = 4 —á–∞—Å–∞, –ó–∞—Ç—Ä–∞—á–µ–Ω–æ = 5 —á–∞—Å–æ–≤</li>
                            <li>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å = (8 + 4) / (6 + 5) √ó 100% = 12 / 11 √ó 100% ‚âà <strong>109%</strong></li>
                        </ul>
                        <p><strong>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:</strong></p>
                        <ul>
                            <li>üü¢ > 100% ‚Äî –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –±—ã—Å—Ç—Ä–µ–µ –æ—Ü–µ–Ω–æ–∫</li>
                            <li>üü° 80-100% ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</li>
                            <li>üî¥ < 80% ‚Äî –∑–∞–¥–∞—á–∏ –∑–∞–Ω–∏–º–∞—é—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —á–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å</li>
                        </ul>
                    </div>
                </div>

                <!-- 2. –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
                <div class="math-section">
                    <h3>2. ‚è±Ô∏è –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (Cycle Time)</h3>
                    <div class="formula-box">
                        <div class="formula">
                            <strong>–§–æ—Ä–º—É–ª–∞:</strong><br>
                            Cycle Time = –°—Ä–µ–¥–Ω–µ–µ –æ—Ç (ResolutionDate - CreatedDate) –¥–ª—è Task
                        </div>
                    </div>
                    <div class="math-description">
                        <p><strong>–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:</strong> –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –¥–æ –µ—ë –∑–∞–∫—Ä—ã—Ç–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–∏–ø–∞ "Task").</p>
                        <p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
                        <ul>
                            <li>Task 1: –°–æ–∑–¥–∞–Ω–∞ 1 –Ω–æ—è–±—Ä—è, –ó–∞–∫—Ä—ã—Ç–∞ 5 –Ω–æ—è–±—Ä—è ‚Üí 4 –¥–Ω—è</li>
                            <li>Task 2: –°–æ–∑–¥–∞–Ω–∞ 3 –Ω–æ—è–±—Ä—è, –ó–∞–∫—Ä—ã—Ç–∞ 6 –Ω–æ—è–±—Ä—è ‚Üí 3 –¥–Ω—è</li>
                            <li>Task 3: –°–æ–∑–¥–∞–Ω–∞ 2 –Ω–æ—è–±—Ä—è, –ó–∞–∫—Ä—ã—Ç–∞ 10 –Ω–æ—è–±—Ä—è ‚Üí 8 –¥–Ω–µ–π</li>
                            <li>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è = (4 + 3 + 8) / 3 ‚âà <strong>5 –¥–Ω–µ–π</strong></li>
                        </ul>
                        <p><strong>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:</strong></p>
                        <ul>
                            <li>üü¢ ‚â§ 3 –¥–Ω—è ‚Äî –±—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</li>
                            <li>üü° 3-5 –¥–Ω–µ–π ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è</li>
                            <li>üî¥ > 5 –¥–Ω–µ–π ‚Äî –¥–æ–ª–≥–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –≤–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å –±–ª–æ–∫–µ—Ä—ã</li>
                        </ul>
                    </div>
                </div>

                <!-- 3. –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏ -->
                <div class="math-section">
                    <h3>3. üêõ –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏ (Debug %)</h3>
                    <div class="formula-box">
                        <div class="formula">
                            <strong>–§–æ—Ä–º—É–ª–∞:</strong><br>
                            Debug % = (Œ£ Time Spent –Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã–µ Bug / Œ£ Time Spent –Ω–∞ –≤—Å—ë) √ó 100%
                        </div>
                        <div class="formula-note">
                            <strong>–£—Å–ª–æ–≤–∏—è:</strong>
                            <ul>
                                <li>‚úÖ Bug –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç (resolutiondate != null)</li>
                                <li>‚úÖ –¢–æ–ª—å–∫–æ –Ω–∞ –¥–æ—Å–∫–∞—Ö: Flutter, iOS, Android, Frontend, Backend</li>
                                <li>‚úÖ "–í—Å—ë" = Bug + Task + Service Task –Ω–∞ —ç—Ç–∏—Ö –¥–æ—Å–∫–∞—Ö</li>
                            </ul>
                        </div>
                    </div>
                    <div class="math-description">
                        <p><strong>–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:</strong> –ö–∞–∫—É—é –¥–æ–ª—é –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–º–∞–Ω–¥–∞ —Ç—Ä–∞—Ç–∏—Ç –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤.</p>
                        <p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
                        <ul>
                            <li>Bug (–∑–∞–∫—Ä—ã—Ç, Flutter): 10 —á–∞—Å–æ–≤ ‚úÖ</li>
                            <li>Bug (–æ—Ç–∫—Ä—ã—Ç, Flutter): 5 —á–∞—Å–æ–≤ ‚ùå (–Ω–µ –∑–∞–∫—Ä—ã—Ç)</li>
                            <li>Task (Flutter): 30 —á–∞—Å–æ–≤ ‚úÖ</li>
                            <li>Service Task (iOS): 5 —á–∞—Å–æ–≤ ‚úÖ</li>
                            <li>Bug (–∑–∞–∫—Ä—ã—Ç, QA): 8 —á–∞—Å–æ–≤ ‚ùå (–Ω–µ —Ç–∞ –¥–æ—Å–∫–∞)</li>
                            <li>Debug % = 10 / (10 + 30 + 5) √ó 100% ‚âà <strong>22.2%</strong></li>
                        </ul>
                        <p><strong>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:</strong></p>
                        <ul>
                            <li>üü¢ < 20% ‚Äî –Ω–∏–∑–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –±–∞–≥–æ–≤, —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ</li>
                            <li>üü° 20-35% ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å</li>
                            <li>üî¥ > 35% ‚Äî –≤—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏, –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—á–µ—Å—Ç–≤–æ–º</li>
                        </ul>
                    </div>
                </div>

                <!-- 4. –ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π -->
                <div class="math-section">
                    <h3>4. üí¨ –ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π (Communication %)</h3>
                    <div class="formula-box">
                        <div class="formula">
                            <strong>–§–æ—Ä–º—É–ª–∞:</strong><br>
                            Communication % = (Œ£ Time Spent –Ω–∞ Service Task / Œ£ Time Spent –Ω–∞ –≤—Å—ë) √ó 100%
                        </div>
                    </div>
                    <div class="math-description">
                        <p><strong>–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:</strong> –ö–∞–∫—É—é –¥–æ–ª—é –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–º–∞–Ω–¥–∞ —Ç—Ä–∞—Ç–∏—Ç –Ω–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏, –º–∏—Ç–∏–Ω–≥–∏, —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∑–∞–¥–∞—á–∏.</p>
                        <p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
                        <ul>
                            <li>Task: 40 —á–∞—Å–æ–≤</li>
                            <li>Service Task: 10 —á–∞—Å–æ–≤ (–º–∏—Ç–∏–Ω–≥–∏, —Ä–µ–≤—å—é, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)</li>
                            <li>Bug: 5 —á–∞—Å–æ–≤</li>
                            <li>Communication % = 10 / (40 + 10 + 5) √ó 100% ‚âà <strong>18.2%</strong></li>
                        </ul>
                        <p><strong>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:</strong></p>
                        <ul>
                            <li>üü¢ 15-25% ‚Äî –∑–¥–æ—Ä–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π</li>
                            <li>üü° < 15% ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è</li>
                            <li>üî¥ > 30% ‚Äî —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –º–∏—Ç–∏–Ω–≥–∏</li>
                        </ul>
                    </div>
                </div>

                <!-- 5. Change Requests -->
                <div class="math-section">
                    <h3>5. üîß Change Requests (CR)</h3>
                    <div class="formula-box">
                        <div class="formula">
                            <strong>–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è CR:</strong><br>
                            –ó–∞–¥–∞—á–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è CR, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –í–°–ï —É—Å–ª–æ–≤–∏—è:
                        </div>
                        <div class="formula-note">
                            <strong>–£—Å–ª–æ–≤–∏–µ 1 - –î–æ—Å–∫–∞:</strong>
                            <ul>
                                <li>Board IN (iOS, Android, Flutter, Frontend, Backend)</li>
                            </ul>
                            <strong>–£—Å–ª–æ–≤–∏–µ 2 - –•–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–∑:</strong>
                            <ul>
                                <li>‚úÖ Component = "CR"</li>
                                <li>‚úÖ Label = "CR"</li>
                                <li>‚úÖ Type = "Improvement"</li>
                                <li>‚úÖ Summary —Å–æ–¥–µ—Ä–∂–∏—Ç "CR" (—Ü–µ–ª–æ–µ —Å–ª–æ–≤–æ)</li>
                                <li>‚úÖ Summary —Å–æ–¥–µ—Ä–∂–∏—Ç "–î–æ—Ä–∞–±–æ—Ç–∫–∞"</li>
                            </ul>
                        </div>
                    </div>
                    <div class="math-description">
                        <p><strong>–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:</strong> –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.</p>
                        <p><strong>–ü—Ä–∏–º–µ—Ä—ã CR:</strong></p>
                        <ul>
                            <li>‚úÖ [Flutter] Task —Å label "CR"</li>
                            <li>‚úÖ [iOS] Improvement "–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ–∏—á—É"</li>
                            <li>‚úÖ [Backend] "CR-1234: –ò–∑–º–µ–Ω–∏—Ç—å API"</li>
                            <li>‚úÖ [Frontend] "–î–æ—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã"</li>
                            <li>‚ùå [QA] Task —Å label "CR" (–Ω–µ —Ç–∞ –¥–æ—Å–∫–∞)</li>
                            <li>‚ùå [Flutter] Bug —Å label "CR" (–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ —Ç–∏–ø—É)</li>
                        </ul>
                        <p><strong>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:</strong></p>
                        <ul>
                            <li>üü¢ –°–Ω–∏–∂–µ–Ω–∏–µ CR ‚Üí —É–ª—É—á—à–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</li>
                            <li>üî¥ –†–æ—Å—Ç CR ‚Üí –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏</li>
                        </ul>
                    </div>
                </div>

                <!-- 6. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö -->
                <div class="math-section">
                    <h3>6. üìä –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è</h3>
                    <div class="math-description">
                        <p><strong>–†–µ–∂–∏–º—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:</strong></p>
                        <ul>
                            <li><strong>–ü–æ –ü—Ä–æ–µ–∫—Ç–∞–º:</strong> –ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ project_key</li>
                            <li><strong>–ü–æ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º:</strong> –ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ assignee</li>
                            <li><strong>–ü–æ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º:</strong> –ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ board</li>
                            <li><strong>–ü–æ –ú–µ—Å—è—Ü–∞–º:</strong> –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –º–µ—Å—è—Ü—É –∑–∞–∫—Ä—ã—Ç–∏—è (resolutiondate)</li>
                            <li><strong>–ü–æ –°–ø—Ä–∏–Ω—Ç–∞–º:</strong> –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ sprint (–∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ø—Ä–∏–Ω—Ç–∞—Ö)</li>
                            <li><strong>–ü–æ –≠–ø–∏–∫–∞–º:</strong> –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ epic_link</li>
                        </ul>
                        
                        <p><strong>–§–∏–ª—å—Ç—Ä—ã:</strong></p>
                        <ul>
                            <li><strong>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</strong> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö board</li>
                            <li><strong>–ü—Ä–æ–µ–∫—Ç—ã:</strong> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö project_key</li>
                            <li><strong>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏:</strong> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</li>
                            <li><strong>–°–ø—Ä–∏–Ω—Ç—ã:</strong> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–ø—Ä–∏–Ω—Ç–æ–≤</li>
                            <li><strong>–≠–ø–∏–∫–∏:</strong> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö epic_link</li>
                        </ul>
                        
                        <p><strong>–õ–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:</strong> –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–µ—Ç–æ–¥–æ–º AND (–≤—Å–µ —É—Å–ª–æ–≤–∏—è –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è).</p>
                    </div>
                </div>

                <!-- 7. –¢—Ä–µ–Ω–¥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ -->
                <div class="math-section">
                    <h3>7. üìà –¢—Ä–µ–Ω–¥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</h3>
                    <div class="math-description">
                        <p><strong>–†–∞—Å—á–µ—Ç —Ç—Ä–µ–Ω–¥–æ–≤:</strong></p>
                        <ul>
                            <li><strong>–ü–µ—Ä–∏–æ–¥:</strong> –ü–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤</li>
                            <li><strong>–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:</strong> –ü–æ –º–µ—Å—è—Ü—É –∑–∞–∫—Ä—ã—Ç–∏—è –∑–∞–¥–∞—á–∏ (resolutiondate)</li>
                            <li><strong>–ú–µ—Ç—Ä–∏–∫–∏:</strong> –î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–µ –∂–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (Performance, Cycle Time, CR Count)</li>
                        </ul>
                        
                        <p><strong>–°–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ (Moving Average):</strong></p>
                        <div class="formula-box">
                            <div class="formula">
                                MA(3) = (Value[n-2] + Value[n-1] + Value[n]) / 3
                            </div>
                        </div>
                        <p>–°–≥–ª–∞–∂–∏–≤–∞–µ—Ç –∫–æ–ª–µ–±–∞–Ω–∏—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–π —Ç—Ä–µ–Ω–¥.</p>
                        
                        <p><strong>–ò–∑–º–µ–Ω–µ–Ω–∏–µ vs –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü:</strong></p>
                        <div class="formula-box">
                            <div class="formula">
                                Change = ((Current - Previous) / Previous) √ó 100%
                            </div>
                        </div>
                        <ul>
                            <li>üü¢ > +2% ‚Äî –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞</li>
                            <li>‚ö™ -2% –¥–æ +2% ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–æ</li>
                            <li>üî¥ < -2% ‚Äî –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞</li>
                        </ul>
                        
                        <p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å CR:</strong> –î–ª—è Change Requests –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ü–≤–µ—Ç–∞:</p>
                        <ul>
                            <li>üü¢ –£–º–µ–Ω—å—à–µ–Ω–∏–µ CR ‚Äî —Ö–æ—Ä–æ—à–æ</li>
                            <li>üî¥ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ CR ‚Äî –ø–ª–æ—Ö–æ</li>
                        </ul>
                    </div>
                </div>

                <!-- 8. –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ -->
                <div class="math-section">
                    <h3>8. üé® –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –¥–µ—Ç–∞–ª–µ–π</h3>
                    <div class="math-description">
                        <p><strong>–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞–¥–∞—á–∏ (Cycle Time):</strong></p>
                        <ul>
                            <li>üü¢ ‚â§ 3 –¥–Ω—è ‚Äî –∑–µ–ª–µ–Ω—ã–π (–±—ã—Å—Ç—Ä–æ)</li>
                            <li>üü° 3-5 –¥–Ω–µ–π ‚Äî –∂–µ–ª—Ç—ã–π (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)</li>
                            <li>üî¥ > 5 –¥–Ω–µ–π ‚Äî –∫—Ä–∞—Å–Ω—ã–π (–¥–æ–ª–≥–æ)</li>
                        </ul>
                        
                        <p><strong>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏:</strong></p>
                        <ul>
                            <li>üü¢ > 100% ‚Äî –∑–µ–ª–µ–Ω—ã–π (–±—ã—Å—Ç—Ä–µ–µ –ø–ª–∞–Ω–∞)</li>
                            <li>üü° 80-100% ‚Äî –∂–µ–ª—Ç—ã–π (–ø–æ –ø–ª–∞–Ω—É)</li>
                            <li>üî¥ < 80% ‚Äî –∫—Ä–∞—Å–Ω—ã–π (–º–µ–¥–ª–µ–Ω–Ω–µ–µ –ø–ª–∞–Ω–∞)</li>
                        </ul>
                    </div>
                </div>

                <!-- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è -->
                <div class="math-section">
                    <h3>üìù –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è</h3>
                    <div class="math-description">
                        <ul>
                            <li><strong>–ò—Å–∫–ª—é—á–µ–Ω–∏—è:</strong> –ó–∞–¥–∞—á–∏ –±–µ–∑ timespent –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞—Å—á–µ—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</li>
                            <li><strong>–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ:</strong> –í—Å–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –æ–∫—Ä—É–≥–ª—è—é—Ç—Å—è –¥–æ 1 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π</li>
                            <li><strong>–ù—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:</strong> –ï—Å–ª–∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å = 0, –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å = 0%</li>
                            <li><strong>–¢–∏–ø—ã –∑–∞–¥–∞—á:</strong> 
                                <ul>
                                    <li>Task ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</li>
                                    <li>Bug ‚Äî –¥–µ—Ñ–µ–∫—Ç—ã –∏ –æ—à–∏–±–∫–∏</li>
                                    <li>Service Task ‚Äî –º–∏—Ç–∏–Ω–≥–∏, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–≤—å—é</li>
                                    <li>Improvement ‚Äî —É–ª—É—á—à–µ–Ω–∏—è –∏ CR</li>
                                </ul>
                            </li>
                            <li><strong>–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ—Å–∫–∏ –¥–ª—è Debug%:</strong> Flutter, iOS, Android, Frontend, Backend</li>
                            <li><strong>–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ—Å–∫–∏ –¥–ª—è CR:</strong> iOS, Android, Flutter, Frontend, Backend</li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
        <!-- End of MATH TAB -->

    </div>
    
    <!-- Filters Modal (shared between tabs) -->
    <div id="filtersModalShared" class="modal">
        <div class="modal-content filters-modal-content">
            <div class="modal-header">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤</h2>
                <span class="close-modal" onclick="closeFiltersModal()">&times;</span>
            </div>
            <div class="modal-body">
                <!-- Search Bar for Filters -->
                <div class="filter-search-container">
                    <input type="text" id="filterSearchInput" class="filter-search-input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º..." oninput="filterSearchResults()">
                </div>
                
                <div class="filters-grid">
                    <div class="filter-column">
                        <div class="column-header">
                            <h3>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Board)</h3>
                            <div>
                                <button class="btn-mini" onclick="selectAllBoards()">–í—Å–µ</button>
                                <button class="btn-mini" onclick="selectNoneBoards()">–°–Ω—è—Ç—å</button>
                            </div>
                        </div>
                        <div class="checkbox-list" id="boardCheckboxList">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    
                    <div class="filter-column">
                        <div class="column-header">
                            <h3>–ü—Ä–æ–µ–∫—Ç—ã</h3>
                            <div>
                                <button class="btn-mini" onclick="selectAllProjects()">–í—Å–µ</button>
                                <button class="btn-mini" onclick="selectNoneProjects()">–°–Ω—è—Ç—å</button>
                            </div>
                        </div>
                        <div class="checkbox-list" id="projectCheckboxList">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    
                    <div class="filter-column">
                        <div class="column-header">
                            <h3>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</h3>
                            <div>
                                <button class="btn-mini" onclick="selectAllAssignees()">–í—Å–µ</button>
                                <button class="btn-mini" onclick="selectNoneAssignees()">–°–Ω—è—Ç—å</button>
                            </div>
                        </div>
                        <div class="checkbox-list" id="assigneeCheckboxList">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    
                    <div class="filter-column">
                        <div class="column-header">
                            <h3>–°–ø—Ä–∏–Ω—Ç—ã</h3>
                            <div>
                                <button class="btn-mini" onclick="selectAllSprints()">–í—Å–µ</button>
                                <button class="btn-mini" onclick="selectNoneSprints()">–°–Ω—è—Ç—å</button>
                            </div>
                        </div>
                        <div class="checkbox-list" id="sprintCheckboxList">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    
                    <div class="filter-column">
                        <div class="column-header">
                            <h3>–≠–ø–∏–∫–∏</h3>
                            <div>
                                <button class="btn-mini" onclick="selectAllEpics()">–í—Å–µ</button>
                                <button class="btn-mini" onclick="selectNoneEpics()">–°–Ω—è—Ç—å</button>
                            </div>
                        </div>
                        <div class="checkbox-list" id="epicCheckboxList">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
            </div>
        </div>
    </div>

    <!-- Task Details Modal -->
    <div id="detailsModal" class="modal">
        <div class="modal-content details-content">
            <div class="modal-header">
                <h2 id="detailsTitle">–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á</h2>
                <div class="modal-header-actions">
                    <button id="openInJiraBtn" class="btn-jira" onclick="openTasksInJira()" title="–û—Ç–∫—Ä—ã—Ç—å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ Jira">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.571 11.513H0a5.218 5.218 0 0 0 5.232 5.215h2.13v2.057A5.215 5.215 0 0 0 12.575 24V12.518a1.005 1.005 0 0 0-1.005-1.005zm5.723-5.756H5.736a5.215 5.215 0 0 0 5.215 5.214h2.129v2.058a5.218 5.218 0 0 0 5.215 5.214V6.758a1.001 1.001 0 0 0-1.001-1.001z"/>
                            <path d="M17.288 0H5.73a5.215 5.215 0 0 0 5.214 5.215h2.129v2.057a5.218 5.218 0 0 0 5.215 5.215V1.001A1.001 1.001 0 0 0 17.288 0z"/>
                        </svg>
                        –û—Ç–∫—Ä—ã—Ç—å –≤ Jira
                    </button>
                    <span class="close-modal" onclick="closeDetails()">&times;</span>
                </div>
            </div>
            
            <!-- Tabs for Details -->
            <div class="modal-tabs">
                <button class="tab-btn active" onclick="switchDetailTab('tasks')">–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</button>
                <button class="tab-btn" onclick="switchDetailTab('bugs')">–ê–Ω–∞–ª–∏–∑ –ë–∞–≥–æ–≤/–ò–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</button>
            </div>

            <div class="modal-body">
                <div id="drillDownControls" style="margin-bottom: 15px; display:none;">
                    <button class="btn-primary btn-small" onclick="drillDownToAssignees()">
                        üë• –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
                    </button>
                </div>

                <!-- Tab: Task List -->
                <div id="tab-tasks" class="detail-tab-content">
                    <!-- Search Bar -->
                    <div class="task-search-bar">
                        <input 
                            type="text" 
                            id="taskSearchInput" 
                            placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∑–∞–¥–∞—á–∞–º (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–ª—é—á, —Ç–∏–ø, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –æ–ø–∏—Å–∞–Ω–∏–µ...)" 
                            oninput="handleTaskSearch()"
                        >
                        <button class="btn-export btn-small" onclick="exportTasksToExcel()">
                            üìä –≠–∫—Å–ø–æ—Ä—Ç
                        </button>
                        <button class="btn-reset btn-small" onclick="clearTaskSearch()" id="clearSearchBtn" style="display: none;">‚úï</button>
                    </div>
                    
                    <!-- Task Filters -->
                    <div class="task-filters">
                        <div class="filter-row">
                            <div class="task-filter-group">
                                <label for="taskTypeFilter">–¢–∏–ø –∑–∞–¥–∞—á–∏</label>
                                <select id="taskTypeFilter">
                                    <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
                                </select>
                            </div>
                            <div class="task-filter-group">
                                <label for="taskPriorityFilter">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                                <select id="taskPriorityFilter">
                                    <option value="all">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                                </select>
                            </div>
                            <div class="task-filter-group">
                                <label for="taskSeverityFilter">Severity</label>
                                <select id="taskSeverityFilter">
                                    <option value="all">–í—Å–µ severity</option>
                                </select>
                            </div>
                            <div class="task-filter-group">
                                <label for="taskBoardFilter">Board</label>
                                <select id="taskBoardFilter">
                                    <option value="all">–í—Å–µ boards</option>
                                </select>
                            </div>
                            <div class="task-filter-group">
                                <label for="taskProjectFilter">–ü—Ä–æ–µ–∫—Ç</label>
                                <select id="taskProjectFilter">
                                    <option value="all">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
                                </select>
                            </div>
                            <button class="btn-reset btn-small" onclick="resetTaskFilters()" style="margin-left: auto; align-self: flex-end;">–°–±—Ä–æ—Å–∏—Ç—å</button>
                        </div>
                    </div>

                    <div class="table-container" style="box-shadow: none; padding: 0; margin-top: 15px;">
                        <table class="details-table">
                            <thead>
                                <tr>
                                    <th class="sortable-task" onclick="sortTasksBy('summary')">
                                        –ó–∞–¥–∞—á–∞ <span id="task-icon-summary" class="sort-icon"></span>
                                    </th>
                                    <th class="sortable-task" onclick="sortTasksBy('key')">
                                        –ö–ª—é—á <span id="task-icon-key" class="sort-icon"></span>
                                    </th>
                                    <th class="sortable-task" onclick="sortTasksBy('project')">
                                        –ü—Ä–æ–µ–∫—Ç <span id="task-icon-project" class="sort-icon"></span>
                                    </th>
                                    <th class="sortable-task" onclick="sortTasksBy('issuetype')">
                                        –¢–∏–ø <span id="task-icon-issuetype" class="sort-icon"></span>
                                    </th>
                                    <th class="sortable-task" onclick="sortTasksBy('priority')">
                                        –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç <span id="task-icon-priority" class="sort-icon"></span>
                                    </th>
                                    <th class="sortable-task" onclick="sortTasksBy('est')">
                                        –û—Ü–µ–Ω–∫–∞ <span id="task-icon-est" class="sort-icon"></span>
                                    </th>
                                    <th class="sortable-task" onclick="sortTasksBy('spent')">
                                        –ó–∞—Ç—Ä–∞—á–µ–Ω–æ <span id="task-icon-spent" class="sort-icon"></span>
                                    </th>
                                    <th class="sortable-task" onclick="sortTasksBy('overtime')" title="–í—Ä–µ–º—è –ø–µ—Ä–µ—Ç—Ä–µ–∫–∞">
                                        –ü–µ—Ä–µ—Ç—Ä–µ–∫ <span id="task-icon-overtime" class="sort-icon"></span>
                                    </th>
                                    <th class="sortable-task" onclick="sortTasksBy('cycleTime')" title="–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞–¥–∞—á–∏ –æ—Ç Todo –¥–æ Done">
                                        –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ <span id="task-icon-cycleTime" class="sort-icon"></span>
                                    </th>
                                    <th style="width: 100px;">–î–µ—Ç–∞–ª–∏</th>
                                </tr>
                            </thead>
                            <tbody id="tasksTableBody">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab: Bug Analysis -->
                <div id="tab-bugs" class="detail-tab-content" style="display: none;">
                    <div class="bug-analysis-grid">
                        <div class="analysis-card">
                            <h4>–ë–∞–≥–∏/–ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã –ø–æ Priority</h4>
                            <div class="chart-mini-wrapper">
                                <canvas id="bugPriorityChart"></canvas>
                            </div>
                            <div id="bugPriorityTable" class="mini-table"></div>
                        </div>
                        <div class="analysis-card">
                            <h4>–ë–∞–≥–∏/–ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã –ø–æ Severity</h4>
                            <div class="chart-mini-wrapper">
                                <canvas id="bugSeverityChart"></canvas>
                            </div>
                            <div id="bugSeverityTable" class="mini-table"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- KPI Details Modal -->
    <div id="kpiModal" class="modal">
        <div class="modal-content details-content">
            <div class="modal-header">
                <h2 id="kpiModalTitle">–î–µ—Ç–∞–ª–∏ KPI</h2>
                <div class="modal-header-actions">
                    <button id="openKPIInJiraBtn" class="btn-jira" onclick="openKPITasksInJira()" title="–û—Ç–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á–∏ –≤ Jira">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.571 11.513H0a5.218 5.218 0 0 0 5.232 5.215h2.13v2.057A5.215 5.215 0 0 0 12.575 24V12.518a1.005 1.005 0 0 0-1.005-1.005zm5.723-5.756H5.736a5.215 5.215 0 0 0 5.215 5.214h2.129v2.058a5.218 5.218 0 0 0 5.215 5.214V6.758a1.001 1.001 0 0 0-1.001-1.001z"/>
                            <path d="M17.288 0H5.73a5.215 5.215 0 0 0 5.214 5.215h2.129v2.057a5.218 5.218 0 0 0 5.215 5.215V1.001A1.001 1.001 0 0 0 17.288 0z"/>
                        </svg>
                        –û—Ç–∫—Ä—ã—Ç—å –≤ Jira
                    </button>
                    <span class="close-modal" onclick="closeKPIModal()">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <div id="kpiModalContent">
                    <!-- Content will be populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Task Detail Modal (Description & Comments) -->
    <div id="taskDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="taskDetailTitle">–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏</h2>
                <span class="close-modal" onclick="closeTaskDetail()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="task-detail-content">
                    <div class="detail-section">
                        <h4>üìù –û–ø–∏—Å–∞–Ω–∏–µ</h4>
                        <div id="taskDescription" class="detail-text"></div>
                    </div>
                    <div class="detail-section">
                        <h4>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (<span id="commentCount">0</span>)</h4>
                        <div id="taskComments" class="comments-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Date Filter Modal -->
    <div id="dateFilterModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2>üìÖ –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–∞–º</h2>
                <span class="close-modal" onclick="closeDateFilter()">&times;</span>
            </div>
            <div class="modal-body">
                <!-- Presets -->
                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä:</h4>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn-preset" onclick="applyDatePreset('lastMonth')">–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü</button>
                        <button class="btn-preset" onclick="applyDatePreset('lastQuarter')">–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–≤–∞—Ä—Ç–∞–ª</button>
                        <button class="btn-preset" onclick="applyDatePreset('thisYear')">–≠—Ç–æ—Ç –≥–æ–¥</button>
                        <button class="btn-preset" onclick="applyDatePreset('last3Months')">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞</button>
                        <button class="btn-preset" onclick="applyDatePreset('last6Months')">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤</button>
                        <button class="btn-preset" onclick="applyDatePreset('all')">–í—Å–µ –≤—Ä–µ–º—è</button>
                    </div>
                </div>

                <!-- Custom Date Range -->
                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">–ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">–û—Ç:</label>
                            <input type="date" id="dateFrom" class="date-input">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">–î–æ:</label>
                            <input type="date" id="dateTo" class="date-input">
                        </div>
                    </div>
                </div>

                <!-- Comparison Mode -->
                <div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="comparePeriodsCheckbox" onchange="toggleComparison()">
                        <span style="font-weight: 600;">–°—Ä–∞–≤–Ω–∏—Ç—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –ø–µ—Ä–∏–æ–¥–æ–º</span>
                    </label>
                    
                    <div id="comparisonDates" style="display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd;">
                        <h5 style="margin-bottom: 10px; color: #666;">–ü–µ—Ä–∏–æ–¥ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:</h5>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: 600;">–û—Ç:</label>
                                <input type="date" id="compareDateFrom" class="date-input">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: 600;">–î–æ:</label>
                                <input type="date" id="compareDateTo" class="date-input">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Current Selection Info -->
                <div id="dateFilterInfo" style="padding: 10px; background: #e8f4f8; border-radius: 4px; margin-bottom: 15px; display: none;">
                    <strong>–¢–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥:</strong> <span id="currentPeriodText">-</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="resetDateFilter()">–°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="btn-primary" onclick="applyDateFilter()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
    <script src="analytics.js"></script>
</body>
</html>
<!-- Trends Tab Content - Insert this into dashboard.html -->

<!-- Tab Navigation (add to controls section) -->
<!--
<div class="control-group tab-nav">
    <button class="tab-nav-btn active" data-tab="metrics">üìä –ú–µ—Ç—Ä–∏–∫–∏</button>
    <button class="tab-nav-btn" data-tab="trends">üìà –¢—Ä–µ–Ω–¥—ã</button>
    <button class="tab-nav-btn" data-tab="sprints">üèÉ –°–ø—Ä–∏–Ω—Ç—ã</button>
</div>
-->

<!-- Old sections removed - now in separate tabs -->

